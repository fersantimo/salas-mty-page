<!DOCTYPE html><html lang="es"><head>
<meta charset="utf-8">
<title>Agenda – Sala Aprendedor al centro</title>

<!-- 1️⃣  FullCalendar core + estilo embebido -->
<script src="https://cdn.jsdelivr.net/npm/@fullcalendar/core@6.1.11/index.global.min.js"></script>

<!-- 2️⃣  Plugins que vamos a usar (¡después del core!) -->
<script src="https://cdn.jsdelivr.net/npm/@fullcalendar/timegrid@6.1.11/index.global.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@fullcalendar/icalendar@6.1.11/index.global.min.js"></script>

<!-- 3️⃣  ICAL.js: requerido por el plugin icalendar -->
<script src="https://cdn.jsdelivr.net/npm/ical.js@1.4.0/build/ical.min.js"></script>

<style>
  body{margin:0;display:flex;height:100vh;font-family:sans-serif}
  #foto{width:35%;max-width:480px;object-fit:cover}
  #cal{flex:1;min-width:320px}
  @media(max-width:900px){body{flex-direction:column}#foto{width:100%;height:38vh}}
</style></head><body>

<img id="foto"
     src="https://raw.githubusercontent.com/fersantimo/salas-mty-page/main/salasMTY-Vertical.png"
     alt="Foto sala">

<div id="cal">Cargando…</div>

<script>
document.addEventListener('DOMContentLoaded', () => {

  /* ——— URL pública .ics que copiaste de Google ——— */
  const ICS_PUBLIC = "https://calendar.google.com/calendar/ical/2318gaej1kq4i7ljh5jjb3jpe35i7fi3%40import.calendar.google.com/public/basic.ics";
  const FEED      = "https://api.allorigins.win/raw?url=" + encodeURIComponent(ICS_PUBLIC);

  const calendar = new FullCalendar.Calendar(document.getElementById('cal'),{
    plugins: [ FullCalendarTimeGrid, FullCalendarICalendar ],
    locale : 'es',
    initialView: 'timeGridDay',
    nowIndicator: true,
    headerToolbar:{
      left:'prev,next today',
      center:'title',
      right:'timeGridDay,timeGridWeek,listDay'
    },
    buttonText:{ today:'Hoy', day:'Día', week:'Semana', list:'Lista' },
    height:'auto',
    events:{ url: FEED, format:'ics' },   // <- aquí consume el .ics
    eventColor:'#0078d4',
    slotMinTime:'07:00', slotMaxTime:'22:00'
  });

  calendar.render();
  /* refresca cada 5 min */
  setInterval(()=>calendar.refetchEvents(),5*60*1000);
});
</script>
</body></html>
