<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <title>Sala – Empatía</title>

  <!-- CSS núcleo + CSS de timeGrid -->
  <link rel="stylesheet"
        href="https://unpkg.com/@fullcalendar/core@6.1.8/main.min.css">
  <link rel="stylesheet"
        href="https://unpkg.com/@fullcalendar/timegrid@6.1.8/main.min.css">

  <!-- Núcleo FullCalendar (global build) -->
  <script src="https://unpkg.com/@fullcalendar/core@6.1.8/index.global.min.js"></script>
  <!-- Plugin timeGrid -->
  <script src="https://unpkg.com/@fullcalendar/timegrid@6.1.8/index.global.min.js"></script>
  <!-- ICAL.js (variable global ICAL) -->
  <script src="https://cdn.jsdelivr.net/npm/ical.js@1.4.0/build/ical.min.js"></script>
  <!-- Plugin icalendar -->
  <script src="https://unpkg.com/@fullcalendar/icalendar@6.1.8/index.global.min.js"></script>

  <style>
    :root{
      --rosa:#f33d70; --gris:#9ea0a3; --linea:#dcdcdc;
      --font:system-ui,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%;display:flex;font-family:var(--font)}
    #hero{width:36%;min-width:300px;background:var(--rosa);
          display:flex;flex-direction:column;color:#fff}
    #hero h1{font-size:2.6rem;font-weight:700;padding:1.4rem}
    #hero img{flex:1;object-fit:cover;width:100%}
    #wrap{flex:1;display:flex;flex-direction:column;padding:0 .8rem}
    #cal{flex:1;height:100%}

    /* FullCalendar tweaks */
    .fc-theme-standard .fc-scrollgrid{border-color:var(--linea)}
    .fc .fc-toolbar-title{font-size:1.3rem;font-weight:600}
    .fc-button{background:#fff;border:2px solid #000;color:#000;border-radius:8px;padding:.2rem .8rem}
    .fc-button-primary:not(:disabled):hover{background:#000;color:#fff}
    .fc-event{background:var(--gris);border:0;border-radius:4px;font-size:.85rem}
  </style>
</head>

<body>
  <aside id="hero">
    <h1 id="roomName">Empatía</h1>
    <img id="roomImg" src="salasMTY-Vertical.png" alt="Sala Empatía">
  </aside>

  <section id="wrap"><div id="cal"></div></section>

<script>
  /* ----------- Config de esta sala ----------- */
  const sala = {
    nombre : 'Empatía',
    ics    : 'Empatia_clean.ics',
    foto   : 'salasMTY-Vertical.png'
  };
  /* ------------------------------------------- */

  document.getElementById('roomName').textContent = sala.nombre;
  document.getElementById('roomImg').src = sala.foto;

  const cal = new FullCalendar.Calendar(document.getElementById('cal'), {
    plugins: [ FullCalendar.TimeGridPlugin, FullCalendar.IcalendarPlugin ],
    initialView: 'timeGridDay',
    locale: 'es-mx',
    slotMinTime: '07:00',
    slotMaxTime: '21:00',
    nowIndicator: true,
    headerToolbar: { left:'prev,next today', center:'title', right:'' },
    height: '100%',
    eventSources: [
      { url: sala.ics, format: 'ics' }
    ]
  });

  cal.render();
  setInterval(() => cal.refetchEvents(), 5 * 60 * 1000);
</script>
</body>
</html>
